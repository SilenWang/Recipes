[workspace]
authors = ["Sylens Wong <qiumin14@163.com>"]
channels = ["conda-forge"]
name = "opencode-recipe"
platforms = ["linux-aarch64", "linux-64"]
version = "0.1.0"
preview = ["pixi-build"]

[dependencies]
rattler-build = "*"

[tasks.bump]
cmd = "TARGET_PLATFORM={{ platform }} rattler-build bump-recipe"
args = [    
    { arg = "platform", default = "linux-64" },
]

[tasks.build]
cmd = "TARGET_PLATFORM={{ platform }} pixi build"
args = ["platform"]
depends-on = [{ task = "install", args = ["{{ platform }}"] }]

[package.build.backend]
name = "pixi-build-rattler-build"
version = "0.3.*" 